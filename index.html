function spawnNewPowerup() {
  const r = Math.random();

  // EASY → ONLY FOOD (red)
  if (currentDifficulty === DIFFICULTY.EASY) {
    currentPowerup = POWERUP_TYPES.FOOD;
  }

  // MEDIUM → everything EXCEPT teleport (green)
  else if (currentDifficulty === DIFFICULTY.MEDIUM) {
    const allowed = [
      POWERUP_TYPES.FOOD,
      POWERUP_TYPES.SPEED_UP,
      POWERUP_TYPES.SLOW_DOWN,
      POWERUP_TYPES.DOUBLE_GROWTH
    ];
    currentPowerup = allowed[Math.floor(Math.random() * allowed.length)];
  }

  // HARD → everything (including teleport / green)
  else if (currentDifficulty === DIFFICULTY.HARD) {
    const all = [
      POWERUP_TYPES.FOOD,
      POWERUP_TYPES.SPEED_UP,
      POWERUP_TYPES.SLOW_DOWN,
      POWERUP_TYPES.DOUBLE_GROWTH,
      POWERUP_TYPES.TELEPORT
    ];
    currentPowerup = all[Math.floor(Math.random() * all.length)];
  }

  spawnItem();
}
